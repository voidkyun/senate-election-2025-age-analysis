# 年齢別得票数変化アニメーション

このプロジェクトは、年齢制限を段階的に変更しながら得票数の変化をアニメーションで表現するグラフを作成します。

## 機能

- **年齢制限アニメーション**: 19歳以下、29歳以下、39歳以下...と年齢制限を段階的に変更しながら、各政党の得票率の変化を可視化
- **人口比率表示**: 対象年齢区分の人口比率も同時に表示
- **GIF保存機能**: アニメーションをGIFファイルとして保存可能
- **静的グラフ表示**: 各年齢区分別の得票率と人口比率を静的グラフで表示

## ファイル構成

- `graph.py`: メインのグラフ作成機能と基本的な静的グラフ表示
- `age_animation.py`: 詳細なアニメーション機能とGIF保存機能
- `common_calculations.py`: 共通計算処理モジュール（年齢区分別の得票率計算）
- `README.md`: このファイル
- `age_animation.gif`: 生成されたアニメーションGIFファイル

## 使用方法

### プログラム内での使用

```python
from age_animation import create_detailed_age_animation

# 詳細なアニメーションを実行
anim = create_detailed_age_animation(interval=2000, repeat=True)

# GIFとして保存
anim = create_detailed_age_animation(save_gif=True, filename="my_animation.gif")
```

## アニメーションの内容

### 年齢区分
- 18-19歳
- 20代
- 30代
- 40代
- 50代
- 60代
- 70代以上

### 表示される政党
- 自民党
- 公明党
- 立憲民主党
- 日本維新の会
- 国国民民主党
- れいわ新選組
- 日本共産党
- 参政党
- 日本保守党
- 社会民主党
- NHK党
- 再生の道
- チーム未来
- 日本改革党
- 日本誠真会
- 無所属連合

## アニメーションの流れ

1. **18-19歳以下の得票率**: 最も若い年齢層のみの得票率を表示
2. **20代以下の得票率**: 18-19歳と20代を合わせた得票率を表示
3. **30代以下の得票率**: 18-19歳、20代、30代を合わせた得票率を表示
4. **40代以下の得票率**: 18-19歳、20代、30代、40代を合わせた得票率を表示
5. **50代以下の得票率**: 18-19歳、20代、30代、40代、50代を合わせた得票率を表示
6. **60代以下の得票率**: 18-19歳、20代、30代、40代、50代、60代を合わせた得票率を表示
7. **70代以上の得票率**: 全年齢層を合わせた得票率を表示

## パラメータ設定

### create_detailed_age_animation関数のパラメータ

- `interval`: フレーム間の間隔（ミリ秒、デフォルト: 2000）
- `repeat`: アニメーションを繰り返すかどうか（デフォルト: True）
- `save_gif`: GIFファイルとして保存するかどうか（デフォルト: False）
- `filename`: 保存するファイル名（デフォルト: "age_animation.gif"）

## 実行方法

### 1. 環境セットアップ

```bash
# 必要なライブラリをインストール
pip install -r requirements.txt
```

または個別にインストールする場合：

```bash
pip install matplotlib numpy pillow
```

### 2. プログラムの実行

#### 静的グラフの表示
```bash
python graph.py
```

#### アニメーションの実行
```bash
python age_animation.py
```

実行時に以下のオプションから選択できます：
- **1**: 詳細なアニメーション（人口比率付き）
- **2**: GIFファイルとして保存

## 注意事項

- 日本語フォントが正しく表示されない場合は、システムに日本語フォントがインストールされていることを確認してください
- GIF保存機能を使用する場合は、`pillow`ライブラリが必要です
- アニメーションの実行には、インタラクティブなmatplotlibバックエンドが必要です
- Windows環境では日本語フォント（Yu Gothic、Meiryo、MS Gothic）が自動的に設定されます

### データの制限事項

**投票率の考慮について**: このシミュレーションでは、年代ごとの投票率の差を考慮していません。実際の選挙では、若年層（特に20代、30代）の投票率は高齢層と比較して低い傾向があります。そのため、実際の選挙結果では低年齢層の影響は、このシミュレーションで示されるよりもさらに少なくなる可能性があります。

- **若年層の投票率**: 20代、30代の投票率は50代、60代と比較して一般的に低い
- **高齢層の投票率**: 50代以上の年齢層は比較的高い投票率を示す傾向

## データソース

このプロジェクトで使用されているデータは以下の公式ソースに基づいています：

### 出口調査データ
- **ソース**: [日テレ出口調査2025](https://www.ntv.co.jp/election2025/exitpoll/all.html)
- **内容**: 年齢区分別の政党得票率データ
- **説明**: 実際の選挙結果に基づく出口調査データを使用し、各年齢層の投票傾向を反映しています

### 人口データ
- **ソース**: [e-Stat 政府統計の総合窓口](https://www.e-stat.go.jp/dbview?sid=0003448237)
- **内容**: 年齢5歳階級別人口推計データ
- **説明**: 総務省統計局による人口推計（令和2年国勢調査基準）を使用しています

### データの整合性
- 年齢区分ごとの得票率は、実際の選挙データに基づいて算出されています
- 人口データは最新の政府統計に基づいています
- 両データを組み合わせることで、年齢制限による得票率の変化を正確にシミュレーションできます

## 技術仕様

- **言語**: Python 3.x
- **主要ライブラリ**: matplotlib, numpy, pillow
- **対応OS**: Windows, macOS, Linux
- **日本語対応**: 日本語フォントの自動設定機能付き # senate-election-2025-age-analysis
